<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <form action="" method="post">
        用户名: <input type="text" name="user_name" id="user_name" > <br>
        Email: <input type="text" name="email" id="email"> <br>
        手机号: <input type="text" name="mobile" id="mobile"> <br>
        密码： <input type="password" name="pass1" autocomplete="" id="pass1"> <br>
        确认密码： <input type="password" name="pass2" autocomplete="" id="pass2"> <br>
        <input type="submit" value="提交">
    </form>

    <script>

        var oName = document.getElementById("user_name")
        var oEmail = document.getElementById("email")
        var oMoibile = document.getElementById("mobile")

        oName.addEventListener('blur',function(){
            var name = this.value;          // 用户名


            // Ajax
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(){
                if(xhr.readyState==4 && xhr.status==200)
                {
                    var json_str = xhr.responseText         //接收服务器的响应
                    var od = JSON.parse(json_str)
                    console.log(od)
                    if(od.errno==0)     //
                    {
                        alert("看来用户名可以使用")
                    }else{
                        alert("看来用户名不可以使用")
                    }

                }
            }

            xhr.open('GET','/index.php?s=api/index/checkname&name=' + name)
            xhr.send()
        })

    </script>

</body>
</html>